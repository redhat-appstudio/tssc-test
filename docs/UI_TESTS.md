# UI E2E Tests Design and Usage

## Overview

The UI E2E Tests for TSSC are designed to test the web pages user can access. They validate the information shown in the UI and check that all required information is shown properly.

## Design

### How are UI tests integrated to a testing pipeline

As the UI tests are not very stable, we decided to start with a simple UI scenario that will check the component already created by the existing e2e tests.

High level test flow used in a CI is described in a picture:

<image src="images/ui_e2e_test_high_level_design.png" width="400px" />

### What are UI tests testing

UI tests run after a successful backend E2E test. UI test then opens an appropriate component in the UI and checks the relevant features based on the component setup. For the release testing, it's required to test (ideally) all combinations of RHADS setup and templates. To save time, we want to run the UI tests in parallel, same as the backend tests.

## Running Tests
To run the test, a user has to be logged in the cluster in a terminal that runs the tests. The project configuration files have to be present (either generated by `npm run generate-config` or created manually). Logs, screenshots and videos are generated and saved to `playwright-report` folder.

To properly log in the RHADS UI, the GitHub OAuth application has to be prepared. GitHub application has to contain a proper Callback url, Homepage url and Webhook url.

**Note:** The user-to-server token expiration has to be opt-out to ensure the tests are not logged out during the test run. Follow the link and opt-out (replace <app> with your app name):
```
https://github.com/settings/apps/<app>/beta
```

Run all UI tests in a terminal:

```
npm run test:ui
```

Run a Playwright UI to run and debug tests:

```
npm run test:ui-interactive
```
